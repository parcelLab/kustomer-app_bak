{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://parcellab-widget/./js/components/OrdersContainer.js","webpack://parcellab-widget/./js/components/NoOrdersCard.js","webpack://parcellab-widget/./js/components/OrderCard.js","webpack://parcellab-widget/./js/components/ParcelCard.js","webpack://parcellab-widget/./js/utils/status.js","webpack://parcellab-widget/./js/components/ActionBox.js","webpack://parcellab-widget/./js/components/ArticleList.js","webpack://parcellab-widget/./js/components/TrackingLink.js","webpack://parcellab-widget/./js/main.js","webpack://parcellab-widget/./js/utils/formatters.js","webpack://parcellab-widget/./js/components/LoadingSpinner.js"],"sourcesContent":["import { createOrderCard } from './OrderCard.js';\nimport { createNoOrdersCard } from './NoOrdersCard.js';\n\n/**\n * Creates a container for displaying orders\n * @param {Array} orders - Array of order objects\n * @returns {HTMLElement} The orders container element\n */\nexport function createOrdersContainer(orders) {\n  if (!orders || orders.length === 0) {\n    return createNoOrdersCard();\n  }\n  \n  // Create an orders container with a small top margin\n  const ordersContainer = document.createElement(\"div\");\n  ordersContainer.className = \"mt-0 space-y-2\";\n  \n  orders.forEach(order => {\n    const orderCard = createOrderCard(order);\n    ordersContainer.appendChild(orderCard);\n  });\n  \n  return ordersContainer;\n}","/**\n * Creates and returns a card displaying \"No orders found\" message\n * @returns {HTMLElement} The no orders card element\n */\nexport function createNoOrdersCard() {\n  const noOrdersCard = document.createElement(\"div\");\n  noOrdersCard.className =\n    \"bg-gray-50 rounded-lg shadow-sm p-3 m-1 mb-2 border border-gray-200 text-sm text-gray-600 text-center\";\n  noOrdersCard.textContent = \"No recent orders found for this customer.\";\n  \n  return noOrdersCard;\n}","import { createParcelCard } from './ParcelCard.js';\n\n/**\n * Creates a card for an order\n * @param {Object} order - The order object\n * @returns {HTMLElement} The order card element\n */\nexport function createOrderCard(order) {\n  // Create card container\n  const card = document.createElement(\"div\");\n  card.className = \"bg-white mb-2\";\n\n  // Create card header\n  const header = document.createElement(\"div\");\n  header.className = \"flex justify-between items-center mb-2 p-2 bg-gray-100\";\n\n  // Order number and carrier info\n  const orderInfo = document.createElement(\"div\");\n  orderInfo.className = \"flex items-center space-x-2\";\n\n  const orderTitle = document.createElement(\"h3\");\n  orderTitle.className = \"text-sm font-semibold text-gray-800\";\n  orderTitle.textContent = `Order ${order.orderNo || \"N/A\"}`;\n  orderInfo.appendChild(orderTitle);\n\n  header.appendChild(orderInfo);\n\n  // Package count display\n  if (order.parcels && order.parcels.length > 0) {\n    const packageInfo = document.createElement(\"div\");\n    packageInfo.className = \"text-xs text-gray-600\";\n\n    const undeliveredParcels = order.parcels.filter(\n      parcel => parcel.last_delivery_status && parcel.last_delivery_status.lifecycle !== \"Delivered\"\n    ).length;\n\n    if (undeliveredParcels > 0) {\n      packageInfo.textContent = `${undeliveredParcels} of ${order.parcels.length} pkgs not delivered`;\n    } else {\n      packageInfo.textContent = `${order.parcels.length} pkgs delivered`;\n    }\n    header.appendChild(packageInfo);\n  }\n\n  // Add header to card\n  card.appendChild(header);\n\n  // If there are parcels, display them\n  if (order.parcels && order.parcels.length > 0) {\n    const parcelsContainer = document.createElement(\"div\");\n    parcelsContainer.className = \"\";\n\n    order.parcels.forEach((parcel, idx) => {\n      const parcelCard = createParcelCard(parcel, idx);\n      parcelsContainer.appendChild(parcelCard);\n    });\n\n    card.appendChild(parcelsContainer);\n  } else {\n    // No parcels found message\n    const noParcels = document.createElement(\"div\");\n    noParcels.className = \"text-sm text-gray-500 italic\";\n    noParcels.textContent = \"No shipment information available\";\n    card.appendChild(noParcels);\n  }\n\n  return card;\n}","import { getStatusColors } from '../utils/status.js';\nimport { createActionBox } from './ActionBox.js';\nimport { createArticleList } from './ArticleList.js';\nimport { createTrackingLink } from './TrackingLink.js';\n\n/**\n * Creates a card for a parcel\n * @param {Object} parcel - The parcel object\n * @param {number} idx - The index of the parcel\n * @returns {HTMLElement} The parcel card element\n */\nexport function createParcelCard(parcel, idx) {\n  const parcelCard = document.createElement(\"div\");\n  const status = parcel.last_delivery_status?.code?.toLowerCase() || \"processing\";\n  const statusColors = getStatusColors(status);\n\n  parcelCard.className = \"bg-white px-2 border-b border-gray-200 pb-2 mb-2 [&:last-child]:pb-0 [&:last-child]:border-b-0\";\n\n  // Parcel header with status\n  const parcelHeader = document.createElement(\"div\");\n  parcelHeader.className = \"flex justify-between items-center mb-1\";\n\n  // Left side: Courier name and Tracking number\n  const parcelInfoLeft = document.createElement(\"div\");\n  parcelInfoLeft.className = \"text-sm\";\n  let leftText = \"\";\n  if (parcel.courier && parcel.courier.prettyname) {\n    leftText += `${parcel.courier.prettyname} `;\n  }\n  if (parcel.tracking_number) {\n    leftText += `${parcel.tracking_number}`;\n  }\n  parcelInfoLeft.textContent = leftText.trim();\n  parcelHeader.appendChild(parcelInfoLeft);\n\n  // Right side: Details link\n  if (parcel.courier && parcel.courier.trackingurl) {\n    const parcelInfoRight = document.createElement(\"a\");\n    parcelInfoRight.className = \"text-xs text-blue-600 hover:underline\";\n    parcelInfoRight.href = parcel.courier.trackingurl;\n    parcelInfoRight.textContent = \"details\";\n    parcelInfoRight.target = \"_blank\"; // Open in new tab\n    parcelHeader.appendChild(parcelInfoRight);\n  }\n\n  parcelCard.appendChild(parcelHeader);\n\n  // Status badge - moved below header\n  const statusContainer = document.createElement(\"div\");\n  statusContainer.className = \"flex items-center space-x-1 mb-1\"; // Added mb-1\n\n  const statusBadge = document.createElement(\"span\");\n  statusBadge.className = `${statusColors.bg} ${statusColors.text} px-2 py-0.5 text-xs font-medium rounded-md`;\n  statusBadge.textContent = parcel.last_delivery_status?.status || \"Processing\";\n  statusContainer.appendChild(statusBadge);\n\n  // Insert status container after parcel header\n  parcelCard.appendChild(statusContainer);\n\n  // Status details\n  if (parcel.last_delivery_status?.status_details) {\n    const statusDetails = document.createElement(\"p\");\n    statusDetails.className = \"text-xs text-gray-600 mb-1\";\n    statusDetails.textContent = parcel.last_delivery_status.status_details;\n    parcelCard.appendChild(statusDetails);\n  }\n\n  // Action box details\n  if (parcel.actionBox && parcel.actionBox.type) {\n    parcelCard.appendChild(createActionBox(parcel.actionBox));\n  }\n\n  // Articles/items section if available\n  if (\n    parcel.delivery_info &&\n    parcel.delivery_info.articles &&\n    parcel.delivery_info.articles.length > 0\n  ) {\n    parcelCard.appendChild(createArticleList(parcel.delivery_info.articles));\n  }\n\n  // Links section\n  if (\n    parcel.courier &&\n    parcel.courier.trackingurl &&\n    !parcel.courier.hide_trackingurl\n  ) {\n    parcelCard.appendChild(createTrackingLink(parcel.courier));\n  }\n\n  return parcelCard;\n}","/**\n * Gets the appropriate status color based on the delivery status\n * @param {string} status - The delivery status\n * @returns {Object} An object containing color classes\n */\nexport function getStatusColors(status) {\n  switch (status?.toLowerCase()) {\n    case \"delivered\":\n      return {\n        bg: \"bg-green-100\",\n        text: \"text-green-800\",\n        icon: \"text-green-500\",\n        border: \"border-green-200\",\n      };\n    case \"in_transit\":\n      return {\n        bg: \"bg-blue-100\",\n        text: \"text-blue-800\",\n        icon: \"text-blue-500\",\n        border: \"border-blue-200\",\n      };\n    case \"out_for_delivery\":\n      return {\n        bg: \"bg-indigo-100\",\n        text: \"text-indigo-800\",\n        icon: \"text-indigo-500\",\n        border: \"border-indigo-200\",\n      };\n    case \"exception\":\n    case \"returned\":\n      return {\n        bg: \"bg-red-100\",\n        text: \"text-red-800\",\n        icon: \"text-red-500\",\n        border: \"border-red-200\",\n      };\n    case \"pickup_ready\":\n    case \"pickup_readytoday\":\n      return {\n        bg: \"bg-purple-100\",\n        text: \"text-purple-800\",\n        icon: \"text-purple-500\",\n        border: \"border-purple-200\",\n      };\n    case \"delayed\":\n      return {\n        bg: \"bg-yellow-100\",\n        text: \"text-yellow-800\",\n        icon: \"text-yellow-500\",\n        border: \"border-yellow-200\",\n      };\n    default:\n      return {\n        bg: \"bg-gray-100\",\n        text: \"text-gray-800\",\n        icon: \"text-gray-500\",\n        border: \"border-gray-200\",\n      };\n  }\n}","/**\n * Creates action box component based on type\n * @param {Object} actionBox - The action box data\n * @returns {HTMLElement} The action box element\n */\nexport function createActionBox(actionBox) {\n  const actionBoxElement = document.createElement(\"div\");\n  actionBoxElement.className = \"mt-1 text-xs\";\n\n  // Handle different action box types\n  switch (actionBox.type) {\n    case \"pickup-location\":\n      actionBoxElement.innerHTML = `\n        <div class=\"flex items-start mt-1\">\n          <svg class=\"w-4 h-4 text-gray-500 mt-0.5 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"></path>\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"></path>\n          </svg>\n          <div>\n            <span class=\"font-medium text-gray-700\">Pickup Location:</span> \n            <span class=\"text-gray-600\">${\n              actionBox.address || \"N/A\"\n            }</span>\n          </div>\n        </div>\n      `;\n      break;\n\n    case \"prediction\":\n      if (actionBox.info) {\n        actionBoxElement.innerHTML = `\n          <div class=\"flex items-start mt-1\">\n            <svg class=\"w-4 h-4 text-gray-500 mt-0.5 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"></path>\n            </svg>\n            <div>\n              <span class=\"font-medium text-gray-700\">${\n                actionBox.label || \"Estimated Delivery\"\n              }:</span> \n              <span class=\"text-gray-600\">${\n                actionBox.info.dayOfWeek || \"\"\n              } ${actionBox.info.dateOfMonth || \"\"} ${\n            actionBox.info.month || \"\"\n          }</span>\n            </div>\n          </div>\n        `;\n      }\n      break;\n\n    default:\n      if (actionBox.label) {\n        actionBoxElement.innerHTML = `\n          <div class=\"text-gray-600 mt-1\">\n            ${actionBox.label}\n          </div>\n        `;\n      }\n  }\n\n  return actionBoxElement;\n}","/**\n * Creates article list component\n * @param {Array} articles - The articles array\n * @returns {HTMLElement} The article list element\n */\nexport function createArticleList(articles) {\n  const articleContainer = document.createElement(\"div\");\n  articleContainer.className = \"mt-2\";\n\n  // Items header\n  const itemsHeader = document.createElement(\"div\");\n  itemsHeader.className =\n    \"text-xs font-medium text-gray-700 mb-1 flex items-center\";\n  itemsHeader.innerHTML = `\n    <svg class=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path fill-rule=\"evenodd\" d=\"M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 00.994-1.11l-1-9A1 1 0 0015 7h-1V6a4 4 0 00-4-4zm2 5V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 112 0 1 1 0 01-2 0zm7-1a1 1 0 100 2 1 1 0 000-2z\" clip-rule=\"evenodd\"></path>\n    </svg>\n    Items (${articles.length})\n  `;\n  articleContainer.appendChild(itemsHeader);\n\n  // Limit to first 2 items to save space, with a \"+\" indicator if there are more\n  const displayLimit = 2;\n  const articlesToShow = articles.slice(0, displayLimit);\n\n  articlesToShow.forEach(article => {\n    const articleItem = document.createElement(\"div\");\n    articleItem.className = \"flex items-center text-xs text-gray-600 mb-1\";\n\n    articleItem.innerHTML = `\n      <span class=\"mr-1\">${article.quantity}x</span>\n      <span class=\"flex-1 truncate\">${\n        article.articleName || \"Unknown Item\"\n      }</span>\n    `;\n\n    articleContainer.appendChild(articleItem);\n  });\n\n  // Show count of remaining items if there are more\n  if (articles.length > displayLimit) {\n    const moreItems = document.createElement(\"div\");\n    moreItems.className = \"text-xs text-gray-500 italic\";\n    moreItems.textContent = `+ ${\n      articles.length - displayLimit\n    } more items`;\n    articleContainer.appendChild(moreItems);\n  }\n\n  return articleContainer;\n}","/**\n * Creates tracking link component\n * @param {Object} courier - The courier info\n * @returns {HTMLElement} The tracking link element\n */\nexport function createTrackingLink(courier) {\n  const linksContainer = document.createElement(\"div\");\n  linksContainer.className = \"mt-2 text-xs\";\n\n  linksContainer.innerHTML = `\n    <a href=\"${\n      courier.trackingurl\n    }\" target=\"_blank\" class=\"text-blue-600 hover:underline flex items-center\">\n      <svg class=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z\"></path>\n        <path d=\"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z\"></path>\n      </svg>\n      ${courier.trackingurl_label || \"Track with carrier\"}\n    </a>\n  `;\n\n  return linksContainer;\n}","import { getEmailFromContext } from './utils/formatters.js';\nimport { createLoadingSpinner } from './components/LoadingSpinner.js';\nimport { createOrdersContainer } from './components/OrdersContainer.js';\n\n/**\n * Initialize the widget when the page loads\n */\nfunction init() {\n  // Make sure Kustomer SDK is available\n  if (typeof Kustomer === 'undefined') {\n    console.error('Kustomer SDK not found');\n    return;\n  }\n\n  Kustomer.initialize(async function (contextJSON) {\n    const email = getEmailFromContext(contextJSON);\n    if (!email) {\n      Kustomer.close();\n      return;\n    }\n\n    const container = document.getElementById(\"container\");\n    container.innerHTML = \"\"; // Clear existing content\n\n    Kustomer.open();\n\n    // Add loading spinner\n    container.appendChild(createLoadingSpinner());\n    Kustomer.resize({ height: \"50px\" }); // Adjust height for spinner\n\n    try {\n      const response = await Kustomer.command.run(\n        \"parcellab_app_67d870cd1e9424e90dc47333.app.api.fetchOrderData\",\n        {\n          args: { customerEmail: email },\n          headers: {\n            Authorization: \"Bearer {{authToken}}\",\n          },\n        }\n      );\n\n      container.innerHTML = \"\"; // Clear existing content\n\n      const orders = response?.responseBody?.orders || [];\n      if (orders.length === 0) {\n        Kustomer.updateStatus(\"info\", \"No orders found\");\n        container.appendChild(createOrdersContainer([]));\n        Kustomer.resize({ height: \"50px\" });\n        return;\n      }\n\n      const ordersContainer = createOrdersContainer(orders);\n      container.appendChild(ordersContainer);\n\n      const height = ordersContainer.scrollHeight;\n      Kustomer.resize({ height: `${Math.min(height, 300)}px` });\n    } catch (error) {\n      Kustomer.updateStatus(\"danger\", \"Error retrieving orders\");\n    }\n  });\n}\n\n// Initialize when DOM is loaded\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', init);\n} else {\n  init();\n}\n\n// Export init function for direct usage\nexport { init };","/**\n * Function to extract the email from the context JSON\n * @param {Object} contextJSON - The context JSON object\n * @returns {string|null} The email value or null if not found\n */\nexport function getEmailFromContext(contextJSON) {\n  var customer_attributes = contextJSON.customer.attributes;\n  if (customer_attributes.emails && customer_attributes.emails.length) {\n    return customer_attributes.emails[0].email;\n  }\n  return null;\n}\n\n/**\n * Function to format a date string into a more readable format\n * @param {string} dateString - The date string to format\n * @returns {string} Formatted date string\n */\nexport function formatDate(dateString) {\n  if (!dateString) return \"N/A\";\n  const date = new Date(dateString);\n  return date.toLocaleDateString(\"en-US\", {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"numeric\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  });\n}","/**\n * Creates and returns a loading spinner element\n * @returns {HTMLElement} The loading spinner element\n */\nexport function createLoadingSpinner() {\n  const spinnerContainer = document.createElement(\"div\");\n  spinnerContainer.className = \"flex justify-center items-center p-4\";\n  \n  spinnerContainer.innerHTML = `\n    <div class=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500\"></div>\n  `;\n  \n  return spinnerContainer;\n}"],"names":["createOrdersContainer","orders","length","noOrdersCard","document","createElement","className","textContent","createNoOrdersCard","ordersContainer","forEach","order","orderCard","card","header","orderInfo","orderTitle","orderNo","appendChild","parcels","packageInfo","undeliveredParcels","filter","parcel","last_delivery_status","lifecycle","parcelsContainer","idx","parcelCard","statusColors","status","toLowerCase","bg","text","icon","border","getStatusColors","code","parcelHeader","parcelInfoLeft","leftText","courier","prettyname","tracking_number","trim","trackingurl","parcelInfoRight","href","target","statusContainer","statusBadge","status_details","statusDetails","actionBox","type","actionBoxElement","innerHTML","address","info","label","dayOfWeek","dateOfMonth","month","createActionBox","delivery_info","articles","articleContainer","itemsHeader","slice","article","articleItem","quantity","articleName","moreItems","createArticleList","hide_trackingurl","linksContainer","trackingurl_label","createTrackingLink","createParcelCard","noParcels","createOrderCard","init","Kustomer","initialize","async","contextJSON","email","customer_attributes","customer","attributes","emails","getEmailFromContext","close","container","getElementById","open","spinnerContainer","createLoadingSpinner","resize","height","response","command","run","args","customerEmail","headers","Authorization","responseBody","updateStatus","scrollHeight","Math","min","error","console","readyState","addEventListener"],"sourceRoot":""}