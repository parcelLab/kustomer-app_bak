{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://parcellab-widget/./js/utils/status.js","webpack://parcellab-widget/./js/components/OrdersContainer.js","webpack://parcellab-widget/./js/components/NoOrdersCard.js","webpack://parcellab-widget/./js/components/OrderCard.js","webpack://parcellab-widget/./js/main.js","webpack://parcellab-widget/./js/utils/formatters.js","webpack://parcellab-widget/./js/components/LoadingSpinner.js"],"sourcesContent":["/**\n * Gets the appropriate status color based on the delivery status\n * @param {string} status - The delivery status\n * @returns {Object} An object containing color classes\n */\nexport function getStatusColors(status) {\n  switch (status?.toLowerCase()) {\n    case \"delivered\":\n      return {\n        bg: \"bg-green-100\",\n        text: \"text-green-800\",\n        icon: \"text-green-500\",\n        border: \"border-green-200\",\n      };\n    case \"in_transit\":\n      return {\n        bg: \"bg-blue-100\",\n        text: \"text-blue-800\",\n        icon: \"text-blue-500\",\n        border: \"border-blue-200\",\n      };\n    case \"out_for_delivery\":\n      return {\n        bg: \"bg-indigo-100\",\n        text: \"text-indigo-800\",\n        icon: \"text-indigo-500\",\n        border: \"border-indigo-200\",\n      };\n    case \"exception\":\n    case \"returned\":\n      return {\n        bg: \"bg-red-100\",\n        text: \"text-red-800\",\n        icon: \"text-red-500\",\n        border: \"border-red-200\",\n      };\n    case \"pickup_ready\":\n    case \"pickup_readytoday\":\n      return {\n        bg: \"bg-purple-100\",\n        text: \"text-purple-800\",\n        icon: \"text-purple-500\",\n        border: \"border-purple-200\",\n      };\n    case \"delayed\":\n      return {\n        bg: \"bg-yellow-100\",\n        text: \"text-yellow-800\",\n        icon: \"text-yellow-500\",\n        border: \"border-yellow-200\",\n      };\n    default:\n      return {\n        bg: \"bg-gray-100\",\n        text: \"text-gray-800\",\n        icon: \"text-gray-500\",\n        border: \"border-gray-200\",\n      };\n  }\n}\n\n/**\n * Gets a status icon based on the delivery status\n * @param {string} status - The delivery status\n * @returns {string} HTML for the status icon\n */\nexport function getStatusIcon(status) {\n  const colors = getStatusColors(status);\n\n  switch (status?.toLowerCase()) {\n    case \"delivered\":\n      return `<svg class=\"${colors.icon} w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clip-rule=\"evenodd\"></path></svg>`;\n    case \"in_transit\":\n      return `<svg class=\"${colors.icon} w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z\" /><path d=\"M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H10a1 1 0 001-1V5a1 1 0 00-1-1H3zM14 7a1 1 0 00-1 1v6.05A2.5 2.5 0 0115.95 16H17a1 1 0 001-1v-5a1 1 0 00-.293-.707l-2-2A1 1 0 0015 7h-1z\" /></svg>`;\n    case \"out_for_delivery\":\n      return `<svg class=\"${colors.icon} w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M3 3a1 1 0 000 2h11a1 1 0 100-2H3zM3 7a1 1 0 000 2h7a1 1 0 100-2H3zM3 11a1 1 0 100 2h4a1 1 0 100-2H3zM15 8a1 1 0 10-2 0v5.586l-1.293-1.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L15 13.586V8z\"></path></svg>`;\n    case \"exception\":\n    case \"returned\":\n      return `<svg class=\"${colors.icon} w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\" clip-rule=\"evenodd\"></path></svg>`;\n    case \"pickup_ready\":\n    case \"pickup_readytoday\":\n      return `<svg class=\"${colors.icon} w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z\" clip-rule=\"evenodd\"></path></svg>`;\n    case \"delayed\":\n      return `<svg class=\"${colors.icon} w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z\" clip-rule=\"evenodd\"></path></svg>`;\n    default:\n      return `<svg class=\"${colors.icon} w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z\" clip-rule=\"evenodd\"></path></svg>`;\n  }\n}","import { createOrderCard } from './OrderCard.js';\nimport { createNoOrdersCard } from './NoOrdersCard.js';\n\n/**\n * Creates a container for displaying orders\n * @param {Array} orders - Array of order objects\n * @returns {HTMLElement} The orders container element\n */\nexport function createOrdersContainer(orders) {\n  if (!orders || orders.length === 0) {\n    return createNoOrdersCard();\n  }\n  \n  // Create an orders container with a small top margin\n  const ordersContainer = document.createElement(\"div\");\n  ordersContainer.className = \"mt-0 space-y-3\";\n  \n  orders.forEach(order => {\n    const orderCard = createOrderCard(order);\n    ordersContainer.appendChild(orderCard);\n  });\n  \n  return ordersContainer;\n}","/**\n * Creates and returns a card displaying \"No orders found\" message\n * @returns {HTMLElement} The no orders card element\n */\nexport function createNoOrdersCard() {\n  const noOrdersCard = document.createElement(\"div\");\n  noOrdersCard.className =\n    \"bg-gray-50 rounded-lg shadow-sm p-3 m-1 mb-2 border border-gray-200 text-sm text-gray-600 text-center\";\n  noOrdersCard.textContent = \"No recent orders found for this customer.\";\n  \n  return noOrdersCard;\n}","import { getStatusColors, getStatusIcon } from '../utils/status.js';\n\n/**\n * Creates a card for an order\n * @param {Object} order - The order object\n * @returns {HTMLElement} The order card element\n */\nexport function createOrderCard(order) {\n  // Create card container\n  const card = document.createElement(\"div\");\n  card.className = \"bg-white rounded-lg shadow-sm p-3 border border-gray-200\";\n\n  // Create card header\n  const header = document.createElement(\"div\");\n  header.className = \"flex justify-between items-center mb-2\";\n\n  // Order number and carrier info\n  const orderInfo = document.createElement(\"div\");\n  orderInfo.className = \"flex items-center space-x-2\";\n\n  const orderTitle = document.createElement(\"h3\");\n  orderTitle.className = \"text-sm font-semibold text-gray-800\";\n  orderTitle.textContent = `Order ${order.orderNo || \"N/A\"}`;\n  orderInfo.appendChild(orderTitle);\n\n  header.appendChild(orderInfo);\n\n  // Add header to card\n  card.appendChild(header);\n\n  // If there are parcels, display them\n  if (order.parcels && order.parcels.length > 0) {\n    const parcelsContainer = document.createElement(\"div\");\n    parcelsContainer.className = \"border-t border-gray-200 pt-2\";\n\n    order.parcels.forEach(parcel => {\n      const parcelCard = createParcelCard(parcel);\n      parcelsContainer.appendChild(parcelCard);\n    });\n\n    card.appendChild(parcelsContainer);\n  } else {\n    // No parcels found message\n    const noParcels = document.createElement(\"div\");\n    noParcels.className = \"text-sm text-gray-500 italic\";\n    noParcels.textContent = \"No shipment information available\";\n    card.appendChild(noParcels);\n  }\n\n  return card;\n}\n\n/**\n * Creates a card for a parcel\n * @param {Object} parcel - The parcel object\n * @returns {HTMLElement} The parcel card element\n */\nfunction createParcelCard(parcel) {\n  const parcelCard = document.createElement(\"div\");\n  const status = parcel.last_delivery_status?.code?.toLowerCase() || \"processing\";\n  const statusColors = getStatusColors(status);\n\n  parcelCard.className = \"bg-white\";\n\n  // Parcel header with status\n  const parcelHeader = document.createElement(\"div\");\n  parcelHeader.className = \"flex justify-between items-center mb-1\";\n\n  // Status badge\n  const statusContainer = document.createElement(\"div\");\n  statusContainer.className = \"flex items-center space-x-1\";\n\n  const statusIcon = document.createElement(\"div\");\n  statusIcon.innerHTML = getStatusIcon(status);\n  statusContainer.appendChild(statusIcon);\n\n  const statusBadge = document.createElement(\"span\");\n  statusBadge.className = `${statusColors.bg} ${statusColors.text} px-2 py-0.5 text-xs font-medium rounded-md`;\n  statusBadge.textContent = parcel.last_delivery_status?.status || \"Processing\";\n  statusContainer.appendChild(statusBadge);\n\n  parcelHeader.appendChild(statusContainer);\n\n  // Tracking number\n  if (parcel.tracking_number) {\n    const trackingNumber = document.createElement(\"div\");\n    trackingNumber.className = \"text-xs text-gray-500\";\n    trackingNumber.textContent = `#${parcel.tracking_number}`;\n    parcelHeader.appendChild(trackingNumber);\n  }\n\n  parcelCard.appendChild(parcelHeader);\n\n  // Status details\n  if (parcel.last_delivery_status?.status_details) {\n    const statusDetails = document.createElement(\"p\");\n    statusDetails.className = \"text-xs text-gray-600 mb-1\";\n    statusDetails.textContent = parcel.last_delivery_status.status_details;\n    parcelCard.appendChild(statusDetails);\n  }\n\n  // Action box details\n  if (parcel.actionBox && parcel.actionBox.type) {\n    parcelCard.appendChild(createActionBox(parcel.actionBox));\n  }\n\n  // Articles/items section if available\n  if (\n    parcel.delivery_info &&\n    parcel.delivery_info.articles &&\n    parcel.delivery_info.articles.length > 0\n  ) {\n    parcelCard.appendChild(createArticleList(parcel.delivery_info.articles));\n  }\n\n  // Links section\n  if (\n    parcel.courier &&\n    parcel.courier.trackingurl &&\n    !parcel.courier.hide_trackingurl\n  ) {\n    parcelCard.appendChild(createTrackingLink(parcel.courier));\n  }\n\n  return parcelCard;\n}\n\n/**\n * Creates action box component based on type\n * @param {Object} actionBox - The action box data\n * @returns {HTMLElement} The action box element\n */\nfunction createActionBox(actionBox) {\n  const actionBoxElement = document.createElement(\"div\");\n  actionBoxElement.className = \"mt-1 text-xs\";\n\n  // Handle different action box types\n  switch (actionBox.type) {\n    case \"pickup-location\":\n      actionBoxElement.innerHTML = `\n        <div class=\"flex items-start mt-1\">\n          <svg class=\"w-4 h-4 text-gray-500 mt-0.5 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"></path>\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"></path>\n          </svg>\n          <div>\n            <span class=\"font-medium text-gray-700\">Pickup Location:</span> \n            <span class=\"text-gray-600\">${\n              actionBox.address || \"N/A\"\n            }</span>\n          </div>\n        </div>\n      `;\n      break;\n\n    case \"prediction\":\n      if (actionBox.info) {\n        actionBoxElement.innerHTML = `\n          <div class=\"flex items-start mt-1\">\n            <svg class=\"w-4 h-4 text-gray-500 mt-0.5 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"></path>\n            </svg>\n            <div>\n              <span class=\"font-medium text-gray-700\">${\n                actionBox.label || \"Estimated Delivery\"\n              }:</span> \n              <span class=\"text-gray-600\">${\n                actionBox.info.dayOfWeek || \"\"\n              } ${actionBox.info.dateOfMonth || \"\"} ${\n            actionBox.info.month || \"\"\n          }</span>\n            </div>\n          </div>\n        `;\n      }\n      break;\n\n    default:\n      if (actionBox.label) {\n        actionBoxElement.innerHTML = `\n          <div class=\"text-gray-600 mt-1\">\n            ${actionBox.label}\n          </div>\n        `;\n      }\n  }\n\n  return actionBoxElement;\n}\n\n/**\n * Creates article list component\n * @param {Array} articles - The articles array\n * @returns {HTMLElement} The article list element\n */\nfunction createArticleList(articles) {\n  const articleContainer = document.createElement(\"div\");\n  articleContainer.className = \"mt-2\";\n\n  // Items header\n  const itemsHeader = document.createElement(\"div\");\n  itemsHeader.className =\n    \"text-xs font-medium text-gray-700 mb-1 flex items-center\";\n  itemsHeader.innerHTML = `\n    <svg class=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path fill-rule=\"evenodd\" d=\"M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 00.994-1.11l-1-9A1 1 0 0015 7h-1V6a4 4 0 00-4-4zm2 5V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 112 0 1 1 0 01-2 0zm7-1a1 1 0 100 2 1 1 0 000-2z\" clip-rule=\"evenodd\"></path>\n    </svg>\n    Items (${articles.length})\n  `;\n  articleContainer.appendChild(itemsHeader);\n\n  // Limit to first 2 items to save space, with a \"+\" indicator if there are more\n  const displayLimit = 2;\n  const articlesToShow = articles.slice(0, displayLimit);\n\n  articlesToShow.forEach(article => {\n    const articleItem = document.createElement(\"div\");\n    articleItem.className = \"flex items-center text-xs text-gray-600 mb-1\";\n\n    articleItem.innerHTML = `\n      <span class=\"mr-1\">${article.quantity}x</span>\n      <span class=\"flex-1 truncate\">${\n        article.articleName || \"Unknown Item\"\n      }</span>\n    `;\n\n    articleContainer.appendChild(articleItem);\n  });\n\n  // Show count of remaining items if there are more\n  if (articles.length > displayLimit) {\n    const moreItems = document.createElement(\"div\");\n    moreItems.className = \"text-xs text-gray-500 italic\";\n    moreItems.textContent = `+ ${\n      articles.length - displayLimit\n    } more items`;\n    articleContainer.appendChild(moreItems);\n  }\n\n  return articleContainer;\n}\n\n/**\n * Creates tracking link component\n * @param {Object} courier - The courier info\n * @returns {HTMLElement} The tracking link element\n */\nfunction createTrackingLink(courier) {\n  const linksContainer = document.createElement(\"div\");\n  linksContainer.className = \"mt-2 text-xs\";\n\n  linksContainer.innerHTML = `\n    <a href=\"${\n      courier.trackingurl\n    }\" target=\"_blank\" class=\"text-blue-600 hover:underline flex items-center\">\n      <svg class=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z\"></path>\n        <path d=\"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z\"></path>\n      </svg>\n      ${courier.trackingurl_label || \"Track with carrier\"}\n    </a>\n  `;\n\n  return linksContainer;\n}","import { getEmailFromContext } from './utils/formatters.js';\nimport { createLoadingSpinner } from './components/LoadingSpinner.js';\nimport { createOrdersContainer } from './components/OrdersContainer.js';\n\n/**\n * Initialize the widget when the page loads\n */\nfunction init() {\n  // Make sure Kustomer SDK is available\n  if (typeof Kustomer === 'undefined') {\n    console.error('Kustomer SDK not found');\n    return;\n  }\n\n  Kustomer.initialize(async function (contextJSON) {\n    const email = getEmailFromContext(contextJSON);\n    if (!email) {\n      Kustomer.close();\n      return;\n    }\n\n    const container = document.getElementById(\"container\");\n    container.innerHTML = \"\"; // Clear existing content\n\n    Kustomer.open();\n\n    // Add loading spinner\n    container.appendChild(createLoadingSpinner());\n    Kustomer.resize({ height: \"50px\" }); // Adjust height for spinner\n\n    try {\n      const response = await Kustomer.command.run(\n        \"parcellab_app_67d870cd1e9424e90dc47333.app.api.fetchOrderData\",\n        {\n          args: { customerEmail: email },\n          headers: {\n            Authorization: \"Bearer {{authToken}}\",\n          },\n        }\n      );\n\n      container.innerHTML = \"\"; // Clear existing content\n\n      const orders = response?.responseBody?.orders || [];\n      if (orders.length === 0) {\n        Kustomer.updateStatus(\"info\", \"No orders found\");\n        container.appendChild(createOrdersContainer([]));\n        Kustomer.resize({ height: \"50px\" });\n        return;\n      }\n\n      const ordersContainer = createOrdersContainer(orders);\n      container.appendChild(ordersContainer);\n\n      const height = ordersContainer.scrollHeight;\n      Kustomer.resize({ height: `${Math.min(height, 300)}px` });\n    } catch (error) {\n      Kustomer.updateStatus(\"danger\", \"Error retrieving orders\");\n    }\n  });\n}\n\n// Initialize when DOM is loaded\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', init);\n} else {\n  init();\n}\n\n// Export init function for direct usage\nexport { init };","/**\n * Function to extract the email from the context JSON\n * @param {Object} contextJSON - The context JSON object\n * @returns {string|null} The email value or null if not found\n */\nexport function getEmailFromContext(contextJSON) {\n  var customer_attributes = contextJSON.customer.attributes;\n  if (customer_attributes.emails && customer_attributes.emails.length) {\n    return customer_attributes.emails[0].email;\n  }\n  return null;\n}\n\n/**\n * Function to format a date string into a more readable format\n * @param {string} dateString - The date string to format\n * @returns {string} Formatted date string\n */\nexport function formatDate(dateString) {\n  if (!dateString) return \"N/A\";\n  const date = new Date(dateString);\n  return date.toLocaleDateString(\"en-US\", {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"numeric\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  });\n}","/**\n * Creates and returns a loading spinner element\n * @returns {HTMLElement} The loading spinner element\n */\nexport function createLoadingSpinner() {\n  const spinnerContainer = document.createElement(\"div\");\n  spinnerContainer.className = \"flex justify-center items-center p-4\";\n  \n  spinnerContainer.innerHTML = `\n    <div class=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500\"></div>\n  `;\n  \n  return spinnerContainer;\n}"],"names":["getStatusColors","status","toLowerCase","bg","text","icon","border","createOrdersContainer","orders","length","noOrdersCard","document","createElement","className","textContent","createNoOrdersCard","ordersContainer","forEach","order","orderCard","card","header","orderInfo","orderTitle","orderNo","appendChild","parcels","parcelsContainer","parcel","parcelCard","last_delivery_status","code","statusColors","parcelHeader","statusContainer","statusIcon","innerHTML","colors","getStatusIcon","statusBadge","tracking_number","trackingNumber","status_details","statusDetails","actionBox","type","actionBoxElement","address","info","label","dayOfWeek","dateOfMonth","month","createActionBox","delivery_info","articles","articleContainer","itemsHeader","slice","article","articleItem","quantity","articleName","moreItems","createArticleList","courier","trackingurl","hide_trackingurl","linksContainer","trackingurl_label","createTrackingLink","createParcelCard","noParcels","createOrderCard","init","Kustomer","initialize","async","contextJSON","email","customer_attributes","customer","attributes","emails","getEmailFromContext","close","container","getElementById","open","spinnerContainer","createLoadingSpinner","resize","height","response","command","run","args","customerEmail","headers","Authorization","responseBody","updateStatus","scrollHeight","Math","min","error","console","readyState","addEventListener"],"sourceRoot":""}