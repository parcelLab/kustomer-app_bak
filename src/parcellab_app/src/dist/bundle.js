(()=>{"use strict";function e(e){if(!e||0===e.length)return function(){const e=document.createElement("div");return e.className="bg-gray-50 rounded-lg shadow-sm p-3 m-1 mb-2 border border-gray-200 text-sm text-gray-600 text-center",e.textContent="No recent orders found for this customer.",e}();const t=document.createElement("div");return t.className="mt-0 space-y-2",e.forEach((e=>{const n=function(e){const t=document.createElement("div");t.className="bg-white mb-2";const n=document.createElement("div");n.className="flex justify-between items-center mb-2 p-2 bg-gray-100";const r=document.createElement("div");r.className="flex items-center space-x-2";const a=document.createElement("h3");if(a.className="text-sm font-semibold text-gray-800",a.textContent=`Order ${e.orderNo||"N/A"}`,r.appendChild(a),n.appendChild(r),e.parcels&&e.parcels.length>0){const t=document.createElement("div");t.className="text-xs text-gray-600";const r=e.parcels.filter((e=>e.last_delivery_status&&"Delivered"!==e.last_delivery_status.lifecycle)).length;t.textContent=r>0?`${r} of ${e.parcels.length} pkgs not delivered`:`${e.parcels.length} pkgs delivered`,n.appendChild(t)}if(t.appendChild(n),e.parcels&&e.parcels.length>0){const n=document.createElement("div");n.className="",e.parcels.forEach(((e,t)=>{const r=function(e){const t=document.createElement("div"),n=function(e){switch(e?.toLowerCase()){case"delivered":return{bg:"bg-green-100",text:"text-green-800",icon:"text-green-500",border:"border-green-200"};case"in_transit":return{bg:"bg-blue-100",text:"text-blue-800",icon:"text-blue-500",border:"border-blue-200"};case"out_for_delivery":return{bg:"bg-indigo-100",text:"text-indigo-800",icon:"text-indigo-500",border:"border-indigo-200"};case"exception":case"returned":return{bg:"bg-red-100",text:"text-red-800",icon:"text-red-500",border:"border-red-200"};case"pickup_ready":case"pickup_readytoday":return{bg:"bg-purple-100",text:"text-purple-800",icon:"text-purple-500",border:"border-purple-200"};case"delayed":return{bg:"bg-yellow-100",text:"text-yellow-800",icon:"text-yellow-500",border:"border-yellow-200"};default:return{bg:"bg-gray-100",text:"text-gray-800",icon:"text-gray-500",border:"border-gray-200"}}}(e.last_delivery_status?.code?.toLowerCase()||"processing");t.className="bg-white px-2 border-b border-gray-200 pb-2 mb-2 [&:last-child]:pb-0 [&:last-child]:border-b-0";const r=document.createElement("div");r.className="flex justify-between items-center mb-1";const a=document.createElement("div");a.className="text-sm";let s="";if(e.courier&&e.courier.prettyname&&(s+=`${e.courier.prettyname} `),e.tracking_number&&(s+=`${e.tracking_number}`),a.textContent=s.trim(),r.appendChild(a),e.courier&&e.courier.trackingurl){const t=document.createElement("a");t.className="text-xs text-blue-600 hover:underline",t.href=e.courier.trackingurl,t.textContent="details",t.target="_blank",r.appendChild(t)}t.appendChild(r);const o=document.createElement("div");o.className="flex items-center space-x-1 mb-1";const i=document.createElement("span");if(i.className=`${n.bg} ${n.text} px-2 py-0.5 text-xs font-medium rounded-md`,i.textContent=e.last_delivery_status?.status||"Processing",o.appendChild(i),t.appendChild(o),e.last_delivery_status?.status_details){const n=document.createElement("p");n.className="text-xs text-gray-600 mb-1",n.textContent=e.last_delivery_status.status_details,t.appendChild(n)}return e.actionBox&&e.actionBox.type&&t.appendChild(function(e){const t=document.createElement("div");switch(t.className="mt-1 text-xs",e.type){case"pickup-location":t.innerHTML=`\n        <div class="flex items-start mt-1">\n          <svg class="w-4 h-4 text-gray-500 mt-0.5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>\n          </svg>\n          <div>\n            <span class="font-medium text-gray-700">Pickup Location:</span> \n            <span class="text-gray-600">${e.address||"N/A"}</span>\n          </div>\n        </div>\n      `;break;case"prediction":e.info&&(t.innerHTML=`\n          <div class="flex items-start mt-1">\n            <svg class="w-4 h-4 text-gray-500 mt-0.5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>\n            </svg>\n            <div>\n              <span class="font-medium text-gray-700">${e.label||"Estimated Delivery"}:</span> \n              <span class="text-gray-600">${e.info.dayOfWeek||""} ${e.info.dateOfMonth||""} ${e.info.month||""}</span>\n            </div>\n          </div>\n        `);break;default:e.label&&(t.innerHTML=`\n          <div class="text-gray-600 mt-1">\n            ${e.label}\n          </div>\n        `)}return t}(e.actionBox)),e.delivery_info&&e.delivery_info.articles&&e.delivery_info.articles.length>0&&t.appendChild(function(e){const t=document.createElement("div");t.className="mt-2";const n=document.createElement("div");if(n.className="text-xs font-medium text-gray-700 mb-1 flex items-center",n.innerHTML=`\n    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n      <path fill-rule="evenodd" d="M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 00.994-1.11l-1-9A1 1 0 0015 7h-1V6a4 4 0 00-4-4zm2 5V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 112 0 1 1 0 01-2 0zm7-1a1 1 0 100 2 1 1 0 000-2z" clip-rule="evenodd"></path>\n    </svg>\n    Items (${e.length})\n  `,t.appendChild(n),e.slice(0,2).forEach((e=>{const n=document.createElement("div");n.className="flex items-center text-xs text-gray-600 mb-1",n.innerHTML=`\n      <span class="mr-1">${e.quantity}x</span>\n      <span class="flex-1 truncate">${e.articleName||"Unknown Item"}</span>\n    `,t.appendChild(n)})),e.length>2){const n=document.createElement("div");n.className="text-xs text-gray-500 italic",n.textContent=`+ ${e.length-2} more items`,t.appendChild(n)}return t}(e.delivery_info.articles)),e.courier&&e.courier.trackingurl&&!e.courier.hide_trackingurl&&t.appendChild(function(e){const t=document.createElement("div");return t.className="mt-2 text-xs",t.innerHTML=`\n    <a href="${e.trackingurl}" target="_blank" class="text-blue-600 hover:underline flex items-center">\n      <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n        <path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"></path>\n        <path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"></path>\n      </svg>\n      ${e.trackingurl_label||"Track with carrier"}\n    </a>\n  `,t}(e.courier)),t}(e);n.appendChild(r)})),t.appendChild(n)}else{const e=document.createElement("div");e.className="text-sm text-gray-500 italic",e.textContent="No shipment information available",t.appendChild(e)}return t}(e);t.appendChild(n)})),t}function t(){"undefined"!=typeof Kustomer?Kustomer.initialize((async function(t){const n=function(e){var t=e.customer.attributes;return t.emails&&t.emails.length?t.emails[0].email:null}(t);if(!n)return void Kustomer.close();const r=document.getElementById("container");r.innerHTML="",Kustomer.open(),r.appendChild(function(){const e=document.createElement("div");return e.className="flex justify-center items-center p-4",e.innerHTML='\n    <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"></div>\n  ',e}()),Kustomer.resize({height:"50px"});try{const t=await Kustomer.command.run("parcellab_app_67d870cd1e9424e90dc47333.app.api.fetchOrderData",{args:{customerEmail:n},headers:{Authorization:"Bearer {{authToken}}"}});r.innerHTML="";const a=t?.responseBody?.orders||[];if(0===a.length)return Kustomer.updateStatus("info","No orders found"),r.appendChild(e([])),void Kustomer.resize({height:"50px"});const s=e(a);r.appendChild(s);const o=s.scrollHeight;Kustomer.resize({height:`${Math.min(o,300)}px`})}catch(e){Kustomer.updateStatus("danger","Error retrieving orders")}})):console.error("Kustomer SDK not found")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t()})();
//# sourceMappingURL=bundle.js.map