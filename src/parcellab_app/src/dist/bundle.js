(()=>{"use strict";function e(e){switch(e?.toLowerCase()){case"delivered":return{bg:"bg-green-100",text:"text-green-800",icon:"text-green-500",border:"border-green-200"};case"in_transit":return{bg:"bg-blue-100",text:"text-blue-800",icon:"text-blue-500",border:"border-blue-200"};case"out_for_delivery":return{bg:"bg-indigo-100",text:"text-indigo-800",icon:"text-indigo-500",border:"border-indigo-200"};case"exception":case"returned":return{bg:"bg-red-100",text:"text-red-800",icon:"text-red-500",border:"border-red-200"};case"pickup_ready":case"pickup_readytoday":return{bg:"bg-purple-100",text:"text-purple-800",icon:"text-purple-500",border:"border-purple-200"};case"delayed":return{bg:"bg-yellow-100",text:"text-yellow-800",icon:"text-yellow-500",border:"border-yellow-200"};default:return{bg:"bg-gray-100",text:"text-gray-800",icon:"text-gray-500",border:"border-gray-200"}}}function t(t){if(!t||0===t.length)return function(){const e=document.createElement("div");return e.className="bg-gray-50 rounded-lg shadow-sm p-3 m-1 mb-2 border border-gray-200 text-sm text-gray-600 text-center",e.textContent="No recent orders found for this customer.",e}();const n=document.createElement("div");return n.className="mt-0 space-y-3",t.forEach((t=>{const r=function(t){const n=document.createElement("div");n.className="bg-white rounded-lg shadow-sm p-3 border border-gray-200";const r=document.createElement("div");r.className="flex justify-between items-center mb-2";const a=document.createElement("div");a.className="flex items-center space-x-2";const s=document.createElement("h3");if(s.className="text-sm font-semibold text-gray-800",s.textContent=`Order ${t.orderNo||"N/A"}`,a.appendChild(s),r.appendChild(a),n.appendChild(r),t.parcels&&t.parcels.length>0){const r=document.createElement("div");r.className="border-t border-gray-200 pt-2",t.parcels.forEach((t=>{const n=function(t){const n=document.createElement("div"),r=t.last_delivery_status?.code?.toLowerCase()||"processing",a=e(r);n.className="bg-white";const s=document.createElement("div");s.className="flex justify-between items-center mb-1";const o=document.createElement("div");o.className="flex items-center space-x-1";const l=document.createElement("div");l.innerHTML=function(t){const n=e(t);switch(t?.toLowerCase()){case"delivered":return`<svg class="${n.icon} w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>`;case"in_transit":return`<svg class="${n.icon} w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z" /><path d="M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H10a1 1 0 001-1V5a1 1 0 00-1-1H3zM14 7a1 1 0 00-1 1v6.05A2.5 2.5 0 0115.95 16H17a1 1 0 001-1v-5a1 1 0 00-.293-.707l-2-2A1 1 0 0015 7h-1z" /></svg>`;case"out_for_delivery":return`<svg class="${n.icon} w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 3a1 1 0 000 2h11a1 1 0 100-2H3zM3 7a1 1 0 000 2h7a1 1 0 100-2H3zM3 11a1 1 0 100 2h4a1 1 0 100-2H3zM15 8a1 1 0 10-2 0v5.586l-1.293-1.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L15 13.586V8z"></path></svg>`;case"exception":case"returned":return`<svg class="${n.icon} w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>`;case"pickup_ready":case"pickup_readytoday":return`<svg class="${n.icon} w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path></svg>`;case"delayed":return`<svg class="${n.icon} w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path></svg>`;default:return`<svg class="${n.icon} w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>`}}(r),o.appendChild(l);const i=document.createElement("span");if(i.className=`${a.bg} ${a.text} px-2 py-0.5 text-xs font-medium rounded-md`,i.textContent=t.last_delivery_status?.status||"Processing",o.appendChild(i),s.appendChild(o),t.tracking_number){const e=document.createElement("div");e.className="text-xs text-gray-500",e.textContent=`#${t.tracking_number}`,s.appendChild(e)}if(n.appendChild(s),t.last_delivery_status?.status_details){const e=document.createElement("p");e.className="text-xs text-gray-600 mb-1",e.textContent=t.last_delivery_status.status_details,n.appendChild(e)}return t.actionBox&&t.actionBox.type&&n.appendChild(function(e){const t=document.createElement("div");switch(t.className="mt-1 text-xs",e.type){case"pickup-location":t.innerHTML=`\n        <div class="flex items-start mt-1">\n          <svg class="w-4 h-4 text-gray-500 mt-0.5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>\n          </svg>\n          <div>\n            <span class="font-medium text-gray-700">Pickup Location:</span> \n            <span class="text-gray-600">${e.address||"N/A"}</span>\n          </div>\n        </div>\n      `;break;case"prediction":e.info&&(t.innerHTML=`\n          <div class="flex items-start mt-1">\n            <svg class="w-4 h-4 text-gray-500 mt-0.5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>\n            </svg>\n            <div>\n              <span class="font-medium text-gray-700">${e.label||"Estimated Delivery"}:</span> \n              <span class="text-gray-600">${e.info.dayOfWeek||""} ${e.info.dateOfMonth||""} ${e.info.month||""}</span>\n            </div>\n          </div>\n        `);break;default:e.label&&(t.innerHTML=`\n          <div class="text-gray-600 mt-1">\n            ${e.label}\n          </div>\n        `)}return t}(t.actionBox)),t.delivery_info&&t.delivery_info.articles&&t.delivery_info.articles.length>0&&n.appendChild(function(e){const t=document.createElement("div");t.className="mt-2";const n=document.createElement("div");if(n.className="text-xs font-medium text-gray-700 mb-1 flex items-center",n.innerHTML=`\n    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n      <path fill-rule="evenodd" d="M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 00.994-1.11l-1-9A1 1 0 0015 7h-1V6a4 4 0 00-4-4zm2 5V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 112 0 1 1 0 01-2 0zm7-1a1 1 0 100 2 1 1 0 000-2z" clip-rule="evenodd"></path>\n    </svg>\n    Items (${e.length})\n  `,t.appendChild(n),e.slice(0,2).forEach((e=>{const n=document.createElement("div");n.className="flex items-center text-xs text-gray-600 mb-1",n.innerHTML=`\n      <span class="mr-1">${e.quantity}x</span>\n      <span class="flex-1 truncate">${e.articleName||"Unknown Item"}</span>\n    `,t.appendChild(n)})),e.length>2){const n=document.createElement("div");n.className="text-xs text-gray-500 italic",n.textContent=`+ ${e.length-2} more items`,t.appendChild(n)}return t}(t.delivery_info.articles)),t.courier&&t.courier.trackingurl&&!t.courier.hide_trackingurl&&n.appendChild(function(e){const t=document.createElement("div");return t.className="mt-2 text-xs",t.innerHTML=`\n    <a href="${e.trackingurl}" target="_blank" class="text-blue-600 hover:underline flex items-center">\n      <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n        <path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"></path>\n        <path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"></path>\n      </svg>\n      ${e.trackingurl_label||"Track with carrier"}\n    </a>\n  `,t}(t.courier)),n}(t);r.appendChild(n)})),n.appendChild(r)}else{const e=document.createElement("div");e.className="text-sm text-gray-500 italic",e.textContent="No shipment information available",n.appendChild(e)}return n}(t);n.appendChild(r)})),n}function n(){"undefined"!=typeof Kustomer?Kustomer.initialize((async function(e){const n=function(e){var t=e.customer.attributes;return t.emails&&t.emails.length?t.emails[0].email:null}(e);if(!n)return void Kustomer.close();const r=document.getElementById("container");r.innerHTML="",Kustomer.open(),r.appendChild(function(){const e=document.createElement("div");return e.className="flex justify-center items-center p-4",e.innerHTML='\n    <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"></div>\n  ',e}()),Kustomer.resize({height:"50px"});try{const e=await Kustomer.command.run("parcellab_app_67d870cd1e9424e90dc47333.app.api.fetchOrderData",{args:{customerEmail:n},headers:{Authorization:"Bearer {{authToken}}"}});r.innerHTML="";const a=e?.responseBody?.orders||[];if(0===a.length)return Kustomer.updateStatus("info","No orders found"),r.appendChild(t([])),void Kustomer.resize({height:"50px"});const s=t(a);r.appendChild(s);const o=s.scrollHeight;Kustomer.resize({height:`${Math.min(o,300)}px`})}catch(e){Kustomer.updateStatus("danger","Error retrieving orders")}})):console.error("Kustomer SDK not found")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()})();
//# sourceMappingURL=bundle.js.map